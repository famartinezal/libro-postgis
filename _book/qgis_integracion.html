<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Integración con QGIS – Bases de datos espaciales con Postgres, PostGIS y QGIS</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./casos_practicos.html" rel="next">
<link href="./etl_geoespacial.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-065a5179aebd64318d7ea99d77b64a9e.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-bd37c45bf7ab68de5f0118974e0cc06b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No se han encontrado resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<script>

(function () {

  if (typeof window === "undefined") {

    return;

  }



  function hydrateFuseFromDocs(fuse, docs) {

    docs.forEach(function (doc) {

      fuse.add(doc);

    });

    if (typeof fuseIndex !== "undefined") {

      fuseIndex = fuse;

    }

    return fuse;

  }



  function loadJsonWithXHR(url, fuse) {

    return new Promise(function (resolve, reject) {

      try {

        var xhr = new XMLHttpRequest();

        xhr.open("GET", url, true);

        xhr.overrideMimeType("application/json");

        xhr.onreadystatechange = function () {

          if (xhr.readyState === XMLHttpRequest.DONE) {

            if (xhr.status === 200 || xhr.status === 0) {

              try {

                var docs = JSON.parse(xhr.responseText);

                resolve(hydrateFuseFromDocs(fuse, docs));

              } catch (err) {

                reject(err);

              }

            } else {

              reject(new Error("No se pudo cargar " + url));

            }

          }

        };

        xhr.onerror = function () {

          reject(new Error("No se pudo cargar " + url));

        };

        xhr.send();

      } catch (err) {

        reject(err);

      }

    });

  }



  function patchSearch() {

    if (typeof window.readSearchData !== "function") {

      return false;

    }

    if (typeof window.Fuse === "undefined") {

      return false;

    }

    if (typeof kFuseIndexOptions === "undefined") {

      return false;

    }

    if (window.__quartoSearchFilePatched) {

      return true;

    }



    var searchUrl = "search.json";

    if (typeof offsetURL === "function") {

      searchUrl = offsetURL("search.json");

    }



    window.readSearchData = async function () {

      if (typeof fuseIndex !== "undefined" && fuseIndex !== undefined) {

        return fuseIndex;

      }



      var fuse = new window.Fuse([], kFuseIndexOptions);



      var hydrate = function (docs) {

        hydrateFuseFromDocs(fuse, docs);

        return fuseIndex;

      };



      try {

        var response = await fetch(searchUrl, { cache: "no-store" });

        if (response && (response.ok || response.status === 0)) {

          var docs = await response.json();

          return hydrate(docs);

        }

      } catch (err) {

        // Continuamos con el fallback

      }



      return loadJsonWithXHR(searchUrl, fuse);

    };



    if (typeof shownWarning !== "undefined") {

      shownWarning = false;

    }



    var originalAlert = window.alert;

    window.alert = function () {

      if (

        arguments.length > 0 &&

        typeof arguments[0] === "string" &&

        arguments[0].indexOf("Search requires JavaScript features disabled when running in file://") === 0

      ) {

        return;

      }

      return originalAlert.apply(window, arguments);

    };



    window.__quartoSearchFilePatched = true;

    return true;

  }



  if (!patchSearch()) {

    document.addEventListener("DOMContentLoaded", function () {

      var attempts = 0;

      var timer = window.setInterval(function () {

        attempts += 1;

        if (patchSearch() || attempts > 40) {

          window.clearInterval(timer);

        }

      }, 100);

    });

  }

})();

</script>



<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./qgis_integracion.html"><span class="chapter-title">Integración con QGIS</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Buscar" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./assets/logo_fedearroz.png" alt="" class="sidebar-logo light-content py-0 d-lg-inline d-none">
      <img src="./assets/logo_fedearroz.png" alt="" class="sidebar-logo dark-content py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Bases de datos espaciales con Postgres, PostGIS y QGIS</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Buscar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Bases de datos espaciales con Postgres, PostGIS y QGIS</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Introducción</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./fundamentos_sql.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Fundamentos de SQL</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./postgis_basico.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Primeros pasos con PostGIS</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./modelado_espacial.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Modelado espacial</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./etl_geoespacial.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">ETL geoespacial</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./qgis_integracion.html" class="sidebar-item-text sidebar-link active"><span class="chapter-title">Integración con QGIS</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./casos_practicos.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Casos prácticos</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ejercicios.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Ejercicios</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./recursos.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Recursos</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contenido</h2>
   
  <ul>
  <li><a href="#conexión-a-postgresql-desde-qgis" id="toc-conexión-a-postgresql-desde-qgis" class="nav-link active" data-scroll-target="#conexión-a-postgresql-desde-qgis">Conexión a PostgreSQL desde QGIS</a></li>
  <li><a href="#cargar-capas-al-lienzo-de-qgis" id="toc-cargar-capas-al-lienzo-de-qgis" class="nav-link" data-scroll-target="#cargar-capas-al-lienzo-de-qgis">Cargar capas al lienzo de QGIS</a></li>
  <li><a href="#importar-archivos-a-la-base-de-datos" id="toc-importar-archivos-a-la-base-de-datos" class="nav-link" data-scroll-target="#importar-archivos-a-la-base-de-datos">Importar archivos a la base de datos</a></li>
  <li><a href="#exportar-archivos-desde-la-base-de-datos" id="toc-exportar-archivos-desde-la-base-de-datos" class="nav-link" data-scroll-target="#exportar-archivos-desde-la-base-de-datos">Exportar archivos desde la base de datos</a></li>
  <li><a href="#consultas-desde-qgis-sql" id="toc-consultas-desde-qgis-sql" class="nav-link" data-scroll-target="#consultas-desde-qgis-sql">Consultas desde QGIS SQL</a></li>
  <li><a href="#consultas-desde-qgis-sql-1" id="toc-consultas-desde-qgis-sql-1" class="nav-link" data-scroll-target="#consultas-desde-qgis-sql-1">Consultas desde QGIS SQL</a></li>
  <li><a href="#salidas-cartográficas" id="toc-salidas-cartográficas" class="nav-link" data-scroll-target="#salidas-cartográficas">Salidas cartográficas</a></li>
  <li><a href="#integración-con-quarto" id="toc-integración-con-quarto" class="nav-link" data-scroll-target="#integración-con-quarto">Integración con Quarto</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-title">Integración con QGIS</span></h1>
</div>



<div class="quarto-title-meta column-body">

    
  
    
  </div>
  


</header>


<section id="conexión-a-postgresql-desde-qgis" class="level2">
<h2 class="anchored" data-anchor-id="conexión-a-postgresql-desde-qgis">Conexión a PostgreSQL desde QGIS</h2>
<ol type="1">
<li><p><strong>Versión de QGIS:</strong> Verifique que la versión de QGIS esté actualizada, con el fin de asegurar compatibilidad con extensiones y complementos del software.</p></li>
<li><p><strong>Verificación Windows</strong>: Verifique el nombre del disco y el usuario de Windows del computador en el que va a establecer la conexión a la base de datos, para realizar las respectivas modificaciones en los scripts de permisos y conexión. Asimismo, compruebe si tiene PostgreSQL instalado en el equipo.</p></li>
<li><p><strong>Preparaciones previas para establecer el túnel de conexión:</strong> La base de datos se encuentra almacenada en un servidor de la empresa, por este motivo se debe crear el túnel y poder acceder a este cada vez que vaya a entrar a la base de datos:</p>
<ul>
<li><p>Debe contar con la carpeta denominada <em>1keys</em>, dentro de esta se encuentran los archivos correspondientes a las llaves de su usuario (id_ed_usuario); script_conexion (creación de la conexión al túnel), y script_permisos (para poder leer la llave de acceso al servidor) y el ícono (es un script de conexión para abrir el túnel y al abrirlo solicita la contraseña de acceso al servidor, que es diferente del acceso a la base de datos). En la carpeta dejar única y exclusivamente los archivos del usuario que está configurando.</p>
<p><img src="assets/Carpeta_keys.png" class="img-fluid"></p></li>
<li><p>La carpeta 1keys se debe copiar en uno de los discos del equipo, reconocer cuál es y renombrarlo en los scripts en caso de ser necesario.</p></li>
<li><p>En <em>ícono</em> click derecho &gt; Propiedades &gt; Acceso directo, en el apartado de destino aparecerá la dirección en la que se encuentran ubicadas las carpetas de la cofiguración a la base de datos, valide el nombre del disco y cámbielo en caso de ser necesario (-File “Disco\1keys).</p>
<p><img src="assets/Propiedades_icono.png" class="img-fluid"></p></li>
<li><p>Validar el nombre de usuario de windows y el disco en el script_permisos y script_conexion. Click derecho sobre el archivo dentro de cada una de las carpetas según corresponda &gt; editar en blog de notas &gt; Guardar después de las modificaciones. Asimismo, verificar el puerto de conexión. Normalmente es el 5432, pero en caso de tener instalado PostgreSQL en la computadora, se debe cambiar por 15432 en el archivo .conf, en el script_conexion (-L) y en los pasos posteriores en QGIS. No olvide guardar los cambios realizados.</p></li>
<li><p>Ejecutar el archivo de <em>script_permisos</em> para que restrinja el acceso de otros usuarios a la base de datos, si no es exitoso, no podrá continuar con el siguiente paso. Diríjase a la carpeta <em>script_permisos</em> &gt; click derecho sobre el archivo que se encuentra dentro de ella &gt; ejecutar en PowerShell.</p>
<p><img src="images/paste-13.png" class="img-fluid"></p>
<p>Si es exitoso, vaya a la llave del usuario (id_ed_usuario) &gt; click derecho &gt; Propiedades. Se abrirá una nueva ventana, en la pestaña <em>Seguridad</em>, en el apartado <em>Nombres de grupos o usuarios</em>, debe aparecer únicamente el que le corresponde al usuario de la base de datos, si aparecen otros, la ejecución del script de permisos no fue exitosa.</p>
<p><img src="assets/Permisos_exitoso.png" class="img-fluid"></p>
<p>El error se debe a que Windows, por defecto, restringe la ejecución de scripts “.ps1” para su protección ante la ejecución de archivos maliciosos, debido a que los scripts de PowerShell puden ejecutar acciones como creación de archivos, modificación de configuraciones, entre otras. Por este motivo, esta configuración debe ser modificada temporalmente (<em>-Scope Process</em>) mediante la línea <em>Set-ExecutionPolicy</em>, con el fin de ejecutar el archivo de permisos y el ícono para el ingreso a la base de datos.</p>
<p>Abrir <em>Windows PowerShell</em> como administrador y ejecutar la siguiente línea que se encuentra en el archivo de script_conexion:</p>
<pre><code>Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass</code></pre>
<p>Aparecerá un mensaje de advertencia de seguridad, en el que solicitita la autorización para la ejecución de Scripts. Luego, escribir S para aceptar el cambio de la directiva de ejecución.</p>
<p><img src="assets/Setpoli.png" class="img-fluid"></p>
<p>Ejecute nuevamente en Windows PowerShell el archivo que se encuentra en la carpeta de <em>script_permisos</em> y revise la seguridad en las propiedades del ícono que abre el túnel para la conexión. Si fue exitoso, siga al paso 4, en caso contrario, continúe con el siguiente paso de esta sección.</p>
<p>Ejecute el archivo script_permisos manualmente desde la consola de <em>Windows PowerShell</em> como administrador:</p>
<pre><code># Disco donde se guardó la carpeta 1keys que contiene los archivos de conexión a la base de datos. 
d:</code></pre>
<pre><code># Cambio de directorio (Change Directory), especificando la carpeta a la cual desea ingresar. 
cd 1keys</code></pre>
<pre><code># Para listar los archivos que se encuentran dentro de la carpeta seleccionada para corroborar su existencia y validar el nombre asignado. 
ls</code></pre>
<pre><code>cd script_permisos</code></pre>
<pre><code># Ejecutar el archivo mencionado en el directorio actual. 
.\usuario_nombre_de_usuario.ps1</code></pre></li>
</ul>
<p>Ahora, vuelva a revisar en la pestaña de seguridad en las propiedades de la llave con los parámetros anteriormente mencionados.</p>
<p>Si el error persiste, …</p></li>
<li><p><strong>Establecimiento del túnel de acceso al servidor:</strong></p>
<p>Al abrir el íncono del usuario creado en la carpeta, se desplegará una ventana en Windows PowerShell en la que le solicitará la contraseña para el acceso al servidor, digítela aún si no es posible verla en la pantalla y oprima la tecla <em>Enter.</em></p>
<p><img src="assets/Ingreso_contraseña_servidor.png" class="img-fluid"></p>
<p>Si es la primera vez, es posible que le salga un mensaje de advertencia, escriba <em>yes</em>, oprima la tecla <em>Enter</em> y digite la contraseña.</p>
<p><img src="assets/Autorización_ingreso_contraseñas.png" class="img-fluid"></p>
<p>Ingreso exitoso al servidor cuando aparece el enunciado “<em>Have a lot of fun…</em>”:</p>
<p><img src="assets/Ingreso_aprobado_al_servidor.png" class="img-fluid"></p>
<p>Si la conexión no fue exitosa, es posible que aparezcan una serie de mensajes de advertencia como los siguientes:</p>
<ul>
<li><p>Error en la ruta de ejecución del archivo script_conexion. Puede aparecer porque no se modificó el nombre del disco en la <em>ruta de destino</em> en <em>Propiedades</em> del íncono de conexión. Cierre esa ventana, valide la información, cambie lo necesario y vuelva a intentar establecer la conexión.</p>
<p><img src="assets/Error_conexión_1.png" class="img-fluid"></p></li>
<li><p>Permisos denegados porque no se ha ejecutado el archivo <em>script_permisos</em></p>
<p><img src="assets/Error_conexión_2.png" class="img-fluid"></p></li>
<li><p>Permisos de red a usuarios remotos, lo que indica que el equipo desde el que se está intentando establecer la conexión no puede establecer conexión con la dirección IP ni con el puerto indicados. La línea <em>Connection timed out</em> indica que se intentó la conexión pero no hubo respuesta, ya sea porque no existe el servidor o porque está bloqueado por un firewall.</p>
<p><img src="assets/Error_conexión_3.png" class="img-fluid"></p>
<p>En este caso, la base de datos se encuentra en un servidor, el cual tiene una IP asignada la cual existe dentro de una red privada (corporativa), por lo que la conexión a esa IP solo servirá si está conectado a esa red. Si se encuentra desde una red diferente, conéctese a la VPN (Virtual Private Network) a través de <em>Forti Client</em>, que es como una llave que permite crear un “túnel” invisible hasta el servidor de la empresa de una forma segura. A continuación, vuelva a intentar establecer la conexión.</p></li>
</ul></li>
<li><p><strong>Verificación de acceso a la red:</strong> Para comprobar la conectividad al servidor o al puerto (IP del computador) donde se encuentra la base de datos PostgreSQL.</p>
<ul>
<li><p>Abra <strong>PowerShell de Windows</strong> desde el buscador o desde el ejecutador de programas (tecla de Windows+R).<br>
<img src="images/Powershell1-2.png" class="img-fluid" alt="Acceder a Windows Powershell"></p></li>
<li><p>Escriba el siguiente código en <em>Windows PowerShell</em> y oprima <em>Enter</em> desde su teclado:</p>
<pre><code>Test-NetConnection &lt;IP computador&gt; -Port 5432</code></pre>
<p><img src="images/paste-6.png" class="img-fluid"></p>
<p>En <em>IP computador</em> digite el código donde se encuentra ubicada la base de datos o el referente al servidor según corresponda (información se encuentra en el archivo pg_service.conf). Por defecto, el puerto es 5432, normalmente no se modifica, sin embargo puede reemplazarlo en caso de ser necesario.</p></li>
<li><p>El enunciado <em>TRUE</em> indica que sí puede acceder desde su computadora al puerto en el que se encuentra ubicada la base de datos. La conexión está lista para iniciar el proceso de vinculación a la base de datos.</p>
<p><img src="assets/Probar conexión al servidor.png" class="img-fluid"></p>
<p>Si no puede conectarse, revise la configuración de los datos del IP del computador o servidor, del puerto, así como la red desde la que está intentando acceder.</p></li>
</ul></li>
<li><p><strong>Archivo pg_service.conf:</strong></p>
<ul>
<li><p>En primer lugar, compruebe si existe una carpeta denominada <em>postgresql</em> copiando la siguiente ruta en el buscador de archivos de su ordenador:</p>
<pre><code>%APPDATA%\postgresql\</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="assets/Comprobar_carpeta_postgresql.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p>SI no existe la carpeta arrojará un error, entonces cree la carpeta denominada <em>postgresql</em>, escribiendo la siguiente ruta en el explorador de archivos:</p>
<pre><code>%APPDATA%</code></pre>
<p><img src="assets/Crear_carpeta_postgresql.png" class="img-fluid" width="488"></p></li>
<li><p>En la carpeta creada, guarde el archivo <em>pg_service.conf</em> enviado desde la oficina principal, el cual contiene la configuración de conexión a la base de datos y reconocerá la información consignada durante la creación de la conexión e ingreso:</p>
<p><img src="assets/Carpeta postgresql con el archivo conf.png" class="img-fluid"></p>
<p>La estructura del archivo pg_service.conf es la siguiente:</p>
<pre><code>[Base de datos] = Nombre del servicio, el cual tendrá el mismo nombre de la base de datos.
host=Dirección del servidor al que se conectará el sistema (IP o dirección del dominio).
port=Puerto de conexión al servicio (base de datos o servidor).
dbname=Nombre de la base de datos a la que el sistema se conectará. 
sslmode=prefer - Conexión. </code></pre></li>
</ul></li>
<li><p><strong>Activación de la contraseña maestra y creación de credenciales cifradas</strong></p>
<p>Este paso es fundamental para proporcionar seguridad a la información que se está visualizando.</p>
<p>Abra QGIS, en el menú diríjase a <em>Configuración</em> y seleccione <em>Opciones</em>.</p>
<p><img src="assets/Ruta Autenticación.png" class="img-fluid"></p>
<p>En la ventana desplegada busque <em>Autenticación,</em> le solicitará la contraseña maestra, una clave única implementada por el software QGIS para proteger las credenciales de conexiones como a la base de datos postgreSQL, acuérdese de ella porque en caso de pérdida no se podrá recuperar. Digítela y de click en <em>Aceptar</em>. Vale aclarar que la contraseña maestra y la solicitada para el acceso directamente a la base de datos, son diferentes.</p>
<p><img src="assets/Contraseña maestra.png" class="img-fluid"></p>
<p>Posteriormente, en la ventana de <em>Autenticación</em>, vaya a <em>Añadir nueva configuración de autenticación</em> y complete los datos solicitados en la ventana desplegada:</p>
<ul>
<li><p>Nombre: Asigne un nombre a la conexión dentro de QGIS. Sirve como identificador para usted y no afecta la base de datos.</p></li>
<li><p>Seleccione <em>Basic authenthication.</em></p></li>
<li><p>Nombre de usuario: El asignado acorde a la/s zona/s que trabaja.</p></li>
<li><p>Contraseña: La asignada para el ingreso a la base de datos.</p>
<p>Los campos restantes se dejan sin información.</p></li>
</ul>
<p><img src="assets/Autenticación.png" class="img-fluid"></p></li>
<li><p><strong>Creación de la conexión a PostgreSQL</strong></p>
<p>En esta sección se establecerá la conexión a PostgreSQL para tener acceso a la base de datos.</p>
<p>En la barra de herramientas busque <em>Administrador de fuentes de datos</em>, en la nueva ventana vaya a <em>Navegador</em> y de click derecho en <em>PostgreSQL</em>. En el menú desplegado, seleccione <em>Conexión nueva</em>.</p>
<p><img src="assets/Administrador fuente de datos.png" class="img-fluid"></p>
<p>Enseguida aparecerá la ventana <em>Crear una nueva conexión a PostGIS.</em></p>
<p><img src="assets/Crear una nueva conexión a PostGIS.png" class="img-fluid"></p>
<p>Diligencie los datos que solicitan:</p>
<ul>
<li><p>Nombre: Asigne un nombre a la conexión dentro de QGIS a la base de datos. Sirve como identificador para usted.</p></li>
<li><p>Servicio: Nombre de la base de datos o service name que se encuentra en el archivo pg_service.conf. Diligenciar este campo permite establecer la conexión sin escribir el <em>host, puerto,</em> etc.</p></li>
<li><p>Anfitrión: Dirección del servidor donde se encuentra la base de datos, puede ser el IP del computador o un dominio.</p></li>
<li><p>Puerto: Número del puerto en el que PostgreSQL recibe conexiones. Por defecto es 5432 y normalmente no se cambia.</p></li>
<li><p>Base de datos: Nombre de la base de datos dentro de PostgreSQL a la cual se conectará.</p></li>
<li><p>Modo SSL: Seleccionar <em>Preferir.</em></p></li>
</ul>
<p>En el apartado de <em>Autenticación,</em> de click en <em>Crear una nueva configuración de autenticación</em> y en el menú desplegable seleccione el nombre que asignó previamente en el diligenciamiento de la autenticación (Numeral 4).</p>
<p>Finalmente, click en <em>Probar conexión</em>, en caso de ser exitosa, podrá observar el enunciado del éxito de la conexión y enseguida diríjase al apartado <strong><em>Ingreso a la base de datos</em></strong>, en caso contrario, continúe en esta sección.</p>
<p><img src="assets/Conexión exitosa.png" id="gfhfghfghfg" width="461" height="117"></p>
<p><strong>Problema de conexión a PostgreSQL desde QGIS:</strong></p>
<p>Si no es posible establecer la conexión, diríjase a <em>Windows Powershell</em> y digite el siguiente código para verificar si la conexión entre el equipo desde el que está intentando acceder a la base de datos y el servidor PostgreSQL, es exitosa o no:</p>
<pre><code>Test-NetConnection &lt;IP computador o servidor &gt; -Port 5432</code></pre>
<p><img src="assets/Conectividad2.png" class="img-fluid"></p>
<p>El usuario es el referente al de Windows (su cuenta), IP del computador o servidor donde se encuentra ubicada la base de datos y el puerto normalmente es 5432 por defecto, si es necesario modifíquelo.</p>
<p><em>TcpTestSucceeded:</em> <em>True</em> incica que la configuración es correcta para aceptar conexiones.</p>
<p><img src="assets/Probar conexión al servidor.png" class="img-fluid"></p>
<p>A continuación, en Windows PowerShell digite el código que se encuentra en la parte inferior. Este le permite configurar una variable de entorno en Windows, le indica a QGIS y PostgreSQL la ruta en la que se encuentra guardado el archivo pg_service.conf, debido a que no siempre reconoce dónde encontrar el archivo.</p>
<pre><code>setx PGSERVICEFILE "$Env:APPDATA\postgresql\pg_service.conf"</code></pre>
<p><img src="assets/Fijar archivo conf.png" class="img-fluid"></p>
<ul>
<li><p>setx: Comando en PowerShell que le permite crear o modificar variables de entorno permanentes, esos cambios se guardan incluso después de reinicar el equipo.</p></li>
<li><p>PGSERVICEFILE: Nombre de la varaible de entorno que se está creando y es reconocida automáticamente por PostgreSQL (y QGIS, que lo usa). Asimismo, permite indicar la ubicación del archivo pg_service.conf.</p></li>
<li><p>$ENV:APPDATA: Define el valor de la variable, que corresponde a la ruta de acceso al archivo pg_service.conf.</p></li>
<li><p><em>CORRECTO: se guardó el valor especificado</em>: Variable creada correctamente en el sistema.</p></li>
</ul>
<p>Ahora, diríjase a <em>Inicio</em> y busque <em>QGIS</em>, en la sección de <em>Carpetas</em> en el menú, seleccione <em>Abrir</em> y de click en <em>OSGeo4W Shell</em>:</p>
<p><img src="assets/QGIS Shell.png" class="img-fluid"></p>
<p>El siguiente código le servirá para probar una conexión a la base de datos PostgreSQL y verificar el usuario que se conectará y la dirección IP, cópielo en la consola de OSGeo4W:</p>
<pre><code>psql -h &lt;IP computador o servidor&gt; -p 5432 -U &lt;nombre de usuario&gt; -d &lt;nombre base de datos&gt; -c "SELECT current_user, inet_client_addr();"</code></pre>
<p><img src="assets/OSGEO Shell 1.png" class="img-fluid"></p>
<p>El código está conformado por caracteres y la información asociada a estos, puede cambiar acorde a la base de datos y repositorio donde se encuentra almacenada. h: host (IP del computador o del servidor); p: puerto; U: usuario de postgreSQL para acceder a la base de datos; d: nombre de la base de datos. Digite la contraseña que le solicitan, en algunos casos no se ve la escritura de la misma, pero sí se está digitando. Si es exitoso, observará el cuadro de la parte inferior izquierda con los datos de su usuario e IP de su computador.</p>
<p><img src="assets/OSGEO Shell 2.png" class="img-fluid"></p>
<p>Repita nuevamente el proceso para crear la conexión a PostgreSQL desde QGIS e ingrese a la base de datos.</p>
<h2 id="ingreso-a-la-base-de-datos" class="anchored">Ingreso a la base de datos</h2>
<p>Una vez haya establecido la conexión a la base de datos con éxito, ingrese de la siguiente manera: en la barra de herramientas busque <em>Base de datos</em> y en el menú desplegado, seleccione <em>Administrador de bases de datos,</em> herramienta útil para conectarse, explorar (ver tablas, esquemas o capas espaciales) y administrar (ejecutar consultas SQL e importar o exportar datos) diferentes bases de datos espaciales como PostGIS<em>:</em></p>
<p><img src="images/paste-4.png" class="img-fluid"></p>
<p>Se abrirá una nueva ventana denominada <em>Administrador de BBDD,</em> en la cual se encuentra la barra de menús conformada por <em>Base de datos, Esquema, Tabla</em> y <em>Schema</em>. La barra de herramientas cuenta con las opciones <em>Actualizar</em>, <em>Ventana SQL</em>, <em>Importar capa/archivo</em> y <em>Exportar a archivo</em>. En el panel lateral derecho, se encuentra <em>Proveedores</em> con el listado de los distintos tipos de bases de datos que QGIS maneja. Seleccione <em>PostGIS</em> y en el menú desplegado, observe las bases de datos junto con los esquemas que las conforman.</p>
<p>Un esquema es considerado como una “carpeta” o “contenedor”, en el que se encuentran las tablas (.csv) y las capas contenidas en la base de datos, permitiendo su administración de una manera organizada. Asimismo, en el panel derecho encontrará la pestaña <em>Info</em>, donde se encuentra la información referente a la conexión, base de datos, esquema o capa seleccionada; <em>Tabla</em> para visualizar los datos de la tabla o capa seleccionada en formato tabular (como una hoja de Excel); y <em>Vista preliminar</em> para previsualizar espacialmente el contenido en caso de tener geometrías.</p>
<p><img src="assets/Ingreso Base de datos.png" class="img-fluid"></p>
<p>Vaya a <em>PostGIS</em> y seleccione la base de datos en la que se estableció la conexión.</p></li>
</ol>
</section>
<section id="cargar-capas-al-lienzo-de-qgis" class="level2">
<h2 class="anchored" data-anchor-id="cargar-capas-al-lienzo-de-qgis">Cargar capas al lienzo de QGIS</h2>
<p>Ingrese a la base de datos para visualizar y editar las capas de interés. En la barra de menús seleccione <em>Base de datos</em> &gt; <em>Administrador de bases de datos</em>. En la ventana <em>Administrador de BBDD</em>, diríjase a <em>PostGIS</em> &gt; seleccione la base de datos de interés &gt; esquema que contiene la/s capa/s &gt; click derecho sobre la capa que quiere visualizar o editar &gt; Seleccione <em>Añadir al lienzo</em>. Del mismo modo, se puede añadir una capa al lienzo de QGIS haciendo doble click izquierdo sobre esta.</p>
<p>Nota: La nomenclatura de capas, tablas y otros archivos es fundamental para la consulta de una amplia gama de análisis. Para ello, evite los espacios entre palabras reemplazándolos por guión al piso ( _ ), por ejemplo en vez de escribir “zona llanos”, escriba “zona_llanos”. En el menú desplegado encontrará las capas contenidas en el esquema seleccionado.</p>
<p><img src="assets/Añadir capa al lienzo de trabajo.png" class="img-fluid"></p>
<p>Una vez se ha subido la capa, puede visualzarla o editarla como normalmente lo hace desde el software QGIS. No olvide guardar sus cambios.</p>
</section>
<section id="importar-archivos-a-la-base-de-datos" class="level2">
<h2 class="anchored" data-anchor-id="importar-archivos-a-la-base-de-datos">Importar archivos a la base de datos</h2>
<p>Para subir a la base de datos PostgreSQL/PostGIS una capa vectorial o una tabla en formato .csv, siga los siguientes pasos:</p>
<ol type="1">
<li><p>Capa en formato .gpkg subida en el software QGIS, por ejemplo una capa denominada <em>Puntos</em>.</p>
<p><img src="assets/Capa a subir puntos.png" class="img-fluid"></p></li>
<li><p>En la barra de menús, vaya a <em>Base de datos</em> &gt; <em>Administrador de bases de datos</em> &gt; PostGIS &gt; click sobre la base de datos en la que subirá el archivo &gt; <em>Importar capa/archivo</em>.</p>
<p><img src="assets/Administrador_BD_subir_capa.png" class="img-fluid"></p></li>
<li><p>En la ventana <em>Importar capa vectorial</em> se encuentran las siguientes opciones:</p>
<ul>
<li><p>Entrada: Hay dos formas de importar el archivo a la base de datos, desde el panel de capas en QGIS o desde el equipo directamente. La primera opción es importar el archivo desde en proyecto QGIS (flechas color rojo): suba la capa o tabla a QGIS y haga click en la barra del menú desplegable, podrá observar las capas que se encuentran en el proyecto, seleccione la que es de su interés. Como segunda alternativa, importe el archivo desde su ordenador (flechas color azul): haga click en el recuadro que tiene tres puntos y búsque la capa y selecciónela.</p>
<p><img src="assets/Capa_de_entrada.png" class="img-fluid"></p>
<p>En este apartado también se encuentra la opción <em>Importar sólo objetos espaciales seleccionados</em> de la capa que se encuentra en el lienzo, se importarán solo las entidades espaciales que tenga seleccionadas.</p>
<p><img src="assets/Importar_imagen_objetos_seleccionados.png" class="img-fluid"></p></li>
<li><p>Esquema: Seleccione en la base de datos el esquema <strong>stg</strong> para guardar el archivo a importar, será almacenado como stg.Puntos.</p></li>
<li><p>Tabla: Corresponde al nombre de la capa que importará dentro del esquema. Si desea que el nombre sea el mismo que la capa del lienzo, selecciónela en el menú desplegable <u>(recomendado)</u>. Si prefiere cambiarlo, escríbalo en este apartado teniendo presente la nota de nomenclartura de archivos.</p>
<p><img src="images/paste-7.png" class="img-fluid"></p></li>
</ul>
<p>Marque las opciones señaladas con un hasterísco (*) y las que considere pertinentes:</p>
<ul>
<li><p>Clave primaria: Nombre del campo que actuará como identificador de cada registro, normalmente es el id. Si la capa ya cuenta con esa columna, QGIS puede usarla directamente.</p></li>
<li><p>Columna de geometría*: Define el nombre del campo donde se guardará la geometría espacial (coordenadas de los vectores). Usualmente se denomina <em>geom</em>.</p></li>
<li><p>SRID de origen: Sistema de Referencia de Coordenadas -SRC- que tiene la capa de origen. QGIS puede reconocer el SRC de la capa automáticamente sin necesidad de especificarlo en este apartado.</p></li>
<li><p>SRID de destino*: SRC que tendrá la capa una vez importada, debe ser EPSG:32618 - WGS / UTM zone 18N. Puede conservar el de origen si corresponde a este o reproyectarlo. Es indispensable que las capas importadas estén proyectadas en el SRC anteriormente mencionado, con el fin de que los resultados de los análisis sean correctos y estandarizar procesos.</p>
<p><img src="assets/Opciones_SRC.png" class="img-fluid"></p></li>
<li><p>Codificación*: Defina la codificación del texto, es decir como se guardan los caracteres. Seleccione UFT-8 para asegurar el reconocimiento de tildes y caracteres especiales como la “ñ”.</p>
<p><img src="assets/Opciones_codifica.png" class="img-fluid"></p></li>
<li><p>Sustituir las capas de destino (si existe): Sustituye un archivo si tiene el mismo nombre y formato, cualquier dato previo será borrado. Si no selecciona esta opción y la capa tiene el mismo nombre que otra que se encuentra en el esquema, le saldrá un error en la importación.</p>
<p><img src="images/paste-8.png" class="img-fluid"></p>
<p>Asegúrese de que la capa que tiene en el lienzo de QGIS sea la última que importó a la base de datos, debido a que puede hacer análisis erróneos, modificar un archivo dferente o hacer cambios que no corresponden al archivo importado.</p></li>
<li><p>No estimular a multiparte: Si las capas tienen geometría multi, como multipolígono, QGIS las dividirá en partes simples (polígonos individuales). Por defecto se déjela <u>sin marcar</u> para conservar las geometrías.</p></li>
<li><p>Pasar nombres de campos a minúsculas: Reescribe todos los nombres de las columnas a minúsculas.</p></li>
<li><p>Crear índice espacial*: Creación de un índice GiST sobre la columna geom que permite hacer las consultas espaciales de ua manera más eficiente. Seleccione esta opción.</p></li>
<li><p>Comentario: Se puede añadir una nota o descripción sobre la capa, el texto se guardará como metadato en la base de datos, es decir que proporcionan información sobre los datos. Podrá apreciar los comentarios en la ventana de <em>Info</em> &gt; <em>Información general</em>.</p></li>
</ul>
<p>Una vez tenga la información completa para la importación del archivo, de click en <em>Aceptar</em> y podrá observar un enunciado que le indica el éxito de la importación.</p>
<p><img src="assets/Importación_imagen_exitosa.png" class="img-fluid"></p></li>
</ol>
</section>
<section id="exportar-archivos-desde-la-base-de-datos" class="level2">
<h2 class="anchored" data-anchor-id="exportar-archivos-desde-la-base-de-datos">Exportar archivos desde la base de datos</h2>
<p>La exportación desde la base de datos PostgreSQL/PostGIS a un disco, puede realizarse desde el panel de capas en QGIS como habitualmente lo hace, o puede hacerlo directamente desde el <em>Administrador de BBDD</em> &gt; Exportar a archivo.</p>
<p><img src="assets/Exportar archivo 1.png" class="img-fluid"></p>
<p>Se abrirá la ventana <em>Exportar a archivo vectorial</em>. En <em>formato</em>, seleccione el de su interés en el menú desplegado; defina la ruta donde desea guardar el archivo en el apartado <em>Guardar como,</em> haciendo click en el recuadro de los tres puntos; en <em>Opciones</em>, defina 32618 como el SRID de destino, <em>Codificación</em> UFT-8 y seleccione si considera sustituir el archivo de destino (si existe). Finalmente, seleccione <em>Aceptar</em> y observará una ventana emergente que le confirma el éxito de la exportación del archivo.</p>
</section>
<section id="consultas-desde-qgis-sql" class="level2">
<h2 class="anchored" data-anchor-id="consultas-desde-qgis-sql">Consultas desde QGIS SQL</h2>
<ol type="1">
<li><p>Consulta de lotes “00000”en la base de datos:</p>
<pre><code>SELECT
      l.lote_id,
      l.cofinca,
      l.secuencia_lote,
      l.lote_codigo,
      l.municipio_principal,
      m.mpio_cnmbr AS municipio_nombre,
      l.area_ha,
      l.geom
  FROM gis.lotes AS l
  LEFT JOIN gis.municipios AS m
    ON m.mpio_cdpmp = l.municipio_principal
  WHERE l.cofinca = '00000';</code></pre></li>
<li><p>Top municipios con más lotes</p>
<pre><code>SELECT
  l.municipio_principal AS mpio_codigo,   -- Código del municipio tomado desde la tabla de lotes
  m.mpio_cnmbr         AS mpio_nombre,    -- Nombre del municipio desde gis.municipios
  COUNT(*)             AS total_lotes,    -- Número de lotes en ese municipio
  SUM(l.area_ha)       AS area_total_ha   -- Suma de áreas (ha) de los lotes en ese municipio
FROM gis.lotes AS l
LEFT JOIN gis.municipios AS m
  ON m.mpio_cdpmp = l.municipio_principal -- Une por código: si no hay match, el nombre queda NULL (LEFT JOIN)
GROUP BY
  l.municipio_principal,                  -- Agrupa por el código del municipio
  m.mpio_cnmbr                            -- y por el nombre (para tener una fila por municipio)
ORDER BY
  total_lotes   DESC,                     -- Ordena primero por mayor cantidad de lotes
  area_total_ha DESC                      -- y como desempate, por mayor área total
LIMIT 5;</code></pre></li>
<li><p>Muncipios con menor cantidad de lotes por UPA</p>
<pre><code>/* Los municipios con menor razón entre lotes y UPAs (con al menos 100 lotes) */
WITH stats AS (
      SELECT municipio_principal, COUNT(DISTINCT upa_id) AS total_upas
      FROM gis.upas
      GROUP BY municipio_principal
  ),
  ratios AS (
      SELECT
          s.municipio_principal,
          s.total_upas,
          l.total_lotes,
          CASE WHEN s.total_upas &gt; 0
               THEN l.total_lotes::numeric / s.total_upas
          END AS razon
      FROM stats s
      JOIN (
          SELECT municipio_principal, COUNT(*) AS total_lotes
          FROM gis.lotes
          GROUP BY municipio_principal
      ) l ON l.municipio_principal = s.municipio_principal
  )
  SELECT r.municipio_principal AS mpio_cdpmp,
         m.mpio_cnmbr,
         m.dpto_cnmbr,
         r.total_upas,
         r.total_lotes,
         r.razon
  FROM ratios r
  JOIN gis.municipios m
    ON m.mpio_cdpmp = r.municipio_principal
  WHERE r.total_upas &gt; 0
    AND r.total_lotes &gt; 100
  ORDER BY r.razon ASC
  LIMIT 5;</code></pre></li>
<li><p>Municipios con mayor cantidad de lotes por UPA</p>
<pre><code>/* Los municipios con menor cantidad delotes por UPA (con al menos 100 lotes) */
WITH stats AS (
      SELECT municipio_principal, COUNT(DISTINCT upa_id) AS total_upas
      FROM gis.upas
      GROUP BY municipio_principal
  ),
  ratios AS (
      SELECT
          s.municipio_principal,
          s.total_upas,
          l.total_lotes,
          CASE WHEN s.total_upas &gt; 0
               THEN l.total_lotes::numeric / s.total_upas
          END AS razon
      FROM stats s
      JOIN (
          SELECT municipio_principal, COUNT(*) AS total_lotes
          FROM gis.lotes
          GROUP BY municipio_principal
      ) l ON l.municipio_principal = s.municipio_principal
  )
  SELECT r.municipio_principal AS mpio_cdpmp,
         m.mpio_cnmbr,
         m.dpto_cnmbr,
         r.total_upas,
         r.total_lotes,
         r.razon
  FROM ratios r
  JOIN gis.municipios m
    ON m.mpio_cdpmp = r.municipio_principal
  WHERE r.total_upas &gt; 0
    AND r.total_lotes &gt; 100
  ORDER BY r.razon DESC
  LIMIT 5;</code></pre></li>
<li><p>Concentración espacial - lotes más cercanos</p>
<pre><code>WITH lotes_centroides AS (                           -- CTE 1: punto representativo interior por lote
  SELECT
    lote_id,                                         -- Identificador del lote
    municipio_principal,                             -- Código de municipio del lote
    CASE
      WHEN ST_Covers(geom, ST_Centroid(geom))        -- ¿El centroide está dentro o en el borde?
        THEN ST_Centroid(geom)                       -- Sí: usa el centroide “real”
      ELSE ST_PointOnSurface(geom)                   -- No: usa un punto garantizado dentro del polígono
    END AS centro
  FROM gis.lotes
),
nn_por_lote AS (                                     -- CTE 2: distancia al vecino más cercano por lote
  SELECT
    c1.municipio_principal,                          -- Trabajamos por municipio (mismo código)
    c1.lote_id,                                      -- Lote de referencia
    MIN(ST_Distance(c1.centro, c2.centro))           -- Distancia mínima a otro punto del mismo municipio
      AS distancia_vecino_m
  FROM lotes_centroides c1
  JOIN lotes_centroides c2
    ON c1.municipio_principal = c2.municipio_principal  -- Solo compara dentro del mismo municipio
   AND c1.lote_id &lt;&gt; c2.lote_id                         -- Evita compararse consigo mismo
  GROUP BY c1.municipio_principal, c1.lote_id           -- Una fila por lote con su distancia mínima
)
SELECT
  n.municipio_principal       AS mpio_codigo,        -- Código del municipio
  m.mpio_cnmbr                AS mpio_nombre,        -- Nombre del municipio
  COUNT(*)                    AS total_lotes,        -- Cuántos lotes se evaluaron en el municipio
  AVG(distancia_vecino_m)     AS distancia_media_m,  -- Distancia media al vecino más cercano
  MIN(distancia_vecino_m)     AS distancia_min_m,    -- Distancia mínima (entre todos los lotes)
  MAX(distancia_vecino_m)     AS distancia_max_m     -- Distancia máxima (entre todos los lotes)
FROM nn_por_lote n
LEFT JOIN gis.municipios m
  ON m.mpio_cdpmp = n.municipio_principal            -- Trae el nombre (LEFT para no perder municipios)
GROUP BY n.municipio_principal, m.mpio_cnmbr         -- Agrega métricas a nivel de municipio
ORDER BY
  distancia_media_m ASC,                             -- Municipios con lotes más “cercanos” primero
  total_lotes DESC                                   -- Desempate: mayor número de lotes
LIMIT 10;</code></pre></li>
<li><p>Añada <code>stg.veredas_norm</code> y defina simbología graduada por <code>area_ha</code>.</p>
<pre><code>WITH lotes_pts AS (                                -- Punto interior por lote (en 32618)
  SELECT
    lote_id,
    municipio_principal,
    CASE
      WHEN ST_Covers(geom, ST_Centroid(geom))      -- Si el centroide cae dentro (o borde)…
        THEN ST_Centroid(geom)                     -- … se usa
      ELSE ST_PointOnSurface(geom)                 -- …si no, usa un punto garantizado dentro
    END AS p
  FROM gis.lotes
),
nn AS (                                            -- Vecino más cercano por lote (KNN + DISTINCT ON)
  SELECT DISTINCT ON (a.lote_id)
    a.municipio_principal,
    a.lote_id,
    ST_Distance(a.p, b.p) AS distancia_vecino_m    -- Metros (geom en 32618)
  FROM lotes_pts a
  JOIN lotes_pts b
    ON a.municipio_principal = b.municipio_principal
   AND a.lote_id &lt;&gt; b.lote_id
  ORDER BY a.lote_id, a.p &lt;-&gt; b.p                  -- KNN: primero el más cercano
),
agg AS (                                           -- Agregación por municipio (filtra &gt; 100 lotes)
  SELECT
    municipio_principal,
    COUNT(*)                AS total_lotes,        -- N° de lotes con vecino (≈ N° de lotes si N&gt;1)
    AVG(distancia_vecino_m) AS distancia_media_m,  -- Dispersión media
    MIN(distancia_vecino_m) AS distancia_min_m,
    MAX(distancia_vecino_m) AS distancia_max_m
  FROM nn
  GROUP BY municipio_principal
  HAVING COUNT(*) &gt; 100                            -- Solo municipios con &gt; 100 lotes
)
SELECT
  a.municipio_principal AS mpio_codigo,
  m.mpio_cnmbr          AS mpio_nombre,
  a.total_lotes,
  a.distancia_media_m,
  a.distancia_min_m,
  a.distancia_max_m
FROM agg a
LEFT JOIN gis.municipios m
  ON m.mpio_cdpmp = a.municipio_principal
ORDER BY a.distancia_media_m DESC, a.total_lotes DESC
LIMIT 10;                                          -- Ajusta o quita el LIMIT según necesite</code></pre></li>
<li><p>Molino más lejano al lote</p>
<pre><code>WITH lotes_nearest AS (
     SELECT
         l.lote_id,
         l.municipio_principal,
         l.departamento_principal,
         nearest.molino_id,
         ST_Distance(l.geom, nearest.geom) AS dist_m
     FROM gis.lotes l
     CROSS JOIN LATERAL (
         SELECT mo.molino_id, mo.geom
         FROM gis.molinos mo
         ORDER BY l.geom &lt;-&gt; mo.geom
         LIMIT 1
     ) AS nearest
   )
   SELECT
       ln.municipio_principal AS mpio_cdpmp,
       m.mpio_cnmbr,
       m.dpto_cnmbr,
       AVG(dist_m)/1000 AS promedio_km,
       MAX(dist_m)/1000 AS max_km,
       COUNT(*) AS lotes
   FROM lotes_nearest ln
   JOIN gis.municipios m ON m.mpio_cdpmp = ln.municipio_principal
   GROUP BY ln.municipio_principal, m.mpio_cnmbr, m.dpto_cnmbr
   ORDER BY promedio_km DESC
   LIMIT 10;</code></pre></li>
<li><p>Asociar nombre de departamentos a la tabla de lotes</p>
<pre><code>SELECT l.*, d.dpto_ccdgo
FROM gis.lotes l
LEFT JOIN gis.departamentos d 
    ON l.departamento_principal = d.dpto_ccdgo;</code></pre></li>
<li><p>Consulta de un cofinca por zona</p>
<pre><code>SELECT l.*
FROM gis.lotes l
-- Se modifica el cofinca y la zona que se desea consultar
WHERE cofinca = '99999' AND zona_codigo = 4;</code></pre></li>
</ol>
</section>
<section id="consultas-desde-qgis-sql-1" class="level2">
<h2 class="anchored" data-anchor-id="consultas-desde-qgis-sql-1">Consultas desde QGIS SQL</h2>
<ol type="1">
<li>Dato compartido para poder hacer las uniones y diferentes anaálisis.</li>
</ol>
<p>Utilice el panel <strong>DB Manager</strong> para ejecutar SQL y crear vistas materiales.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">MATERIALIZED</span> <span class="kw">VIEW</span> carto.v_veredas_fuente_hidrica <span class="kw">AS</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="kw">WITH</span> fuentes <span class="kw">AS</span> (</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">SELECT</span> geom</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">FROM</span> <span class="fu">ref</span>.hidrografia_principal</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>),</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>simplificado <span class="kw">AS</span> (</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">SELECT</span> vereda_codigo,</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>         vereda_nombre,</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>         municipio,</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>         ST_SimplifyPreserveTopology(geom, <span class="dv">5</span>) <span class="kw">AS</span> geom</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">FROM</span> stg.veredas_norm</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> s.<span class="op">*</span>, ST_Distance(s.geom, f.geom) <span class="kw">AS</span> distancia_m</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> simplificado s</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="kw">CROSS</span> <span class="kw">JOIN</span> LATERAL (</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>  <span class="kw">SELECT</span> geom</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>  <span class="kw">FROM</span> fuentes</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>  <span class="kw">ORDER</span> <span class="kw">BY</span> s.geom <span class="op">&lt;-&gt;</span> geom</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>  <span class="kw">LIMIT</span> <span class="dv">1</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>) <span class="kw">AS</span> f;</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<p>Recargue la vista en QGIS y configure actualizaciones automáticas tras <code>REFRESH MATERIALIZED VIEW</code>.</p>
</section>
<section id="salidas-cartográficas" class="level2">
<h2 class="anchored" data-anchor-id="salidas-cartográficas">Salidas cartográficas</h2>
<ul>
<li>Diseñe plantillas de impresión con logotipo Fedearroz en la esquina inferior.</li>
<li>Exporte mapas en PDF y PNG, guardándolos en <code>reportes_cartografia/</code> con nomenclatura <code>YYYYMMDD_tema.pdf</code>.</li>
<li>Documente estilos QGIS (<code>.qml</code>) en la carpeta <code>consultas/estilos_qgis/</code>.</li>
</ul>
</section>
<section id="integración-con-quarto" class="level2">
<h2 class="anchored" data-anchor-id="integración-con-quarto">Integración con Quarto</h2>
<p>Inserte mapas renderizados como imágenes o <code>iframe</code> cuando se publique el libro.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="al">![](reportes_cartografia/20250315_mapa_veredas_tolima.png)</span>{fig-align="center"}</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<p>Mantenga activos los enlaces relativos para que GitHub Pages genere el sitio correctamente.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copiado");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copiado");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation column-body">
  <div class="nav-page nav-page-previous">
      <a href="./etl_geoespacial.html" class="pagination-link" aria-label="ETL geoespacial">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-title">ETL geoespacial</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./casos_practicos.html" class="pagination-link" aria-label="Casos prácticos">
        <span class="nav-page-text"><span class="chapter-title">Casos prácticos</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© 2025 Fredy Martínez y Sandra Rodríguez</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p><a href="https://www.fedearroz.com.co/">Fedearroz-FNA</a></p>
</div>
  </div>
</footer>




<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>