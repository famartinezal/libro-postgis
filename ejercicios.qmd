---
title: "Ejercicios"
---

## Sesión 1: SQL básico

1. Consultar las cinco veredas más extensas del Tolima.
2. Identificar veredas sin área registrada (`area_ha IS NULL`).
3. Calcular el área promedio por departamento usando CTE.

## Sesión 2: Geometrías

1. Crear una vista con centroides.
2. Calcular la distancia mínima a cuerpos de agua.
3. Generar un informe de veredas que se traslapan con áreas protegidas.

```sql
WITH protegidas AS (
  SELECT geom
  FROM ref.areas_protegidas
),
intersecciones AS (
  SELECT v.vereda_codigo,
         v.vereda_nombre,
         v.municipio,
         ST_Area(ST_Intersection(v.geom, p.geom)) / 10000 AS area_solapada
  FROM stg.veredas_norm v
  JOIN protegidas p
    ON ST_Intersects(v.geom, p.geom)
)
SELECT *
FROM intersecciones
WHERE area_solapada > 0.5
ORDER BY area_solapada DESC;
```

## Sesión 3: QGIS

1. Conectar QGIS al esquema `stg` y cargar capas.
2. Crear estilos graduados y guardar `.qml` en `consultas/estilos_qgis/`.
3. Publicar un mapa y exportarlo en PDF.

## Sesión 4: Automatización

1. Elaborar un script `bash` que reconstruya tablas y ejecute consultas.
2. Configurar un `cron` para generar reportes QA.
3. Documentar hallazgos en `reportes_cartografia/README.md`.
